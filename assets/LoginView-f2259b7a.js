import{_ as m,o as i,c as v,d as p,t as h,r as b,l as B,n as A,m as S,g as f,p as w,j as F,i as x,A as k,a as c,b as V,w as g,e as _,k as L,u as I}from"./index-cc9d678e.js";const j={props:{title:{type:String,default:""}},emits:["submit"],setup(n,{emit:e}){function o(t){e("submit",t)}return{...n,submitHandler:o}}},C={class:"base-form"},E={class:"base-form-title"};function H(n,e,o,t,a,s){return i(),v("div",C,[p("form",{class:"space-y-6",action:"#",onSubmit:e[0]||(e[0]=B(l=>t.submitHandler(l),["prevent"]))},[p("h5",E,h(o.title),1),b(n.$slots,"fields",{},void 0,!0),b(n.$slots,"actions",{},void 0,!0)],32)])}const N=m(j,[["render",H],["__scopeId","data-v-b186d47e"]]);const O={props:{placeholder:{type:String,default:"Enter text"},label:{type:String,default:""},modelValue:{type:String,default:""},invalid:{type:Boolean,default:!1},type:{type:String,default:"text"},id:{type:String,default:""}},emits:["update:modelValue","blur"],setup(n,{emit:e}){function o(a){e("update:modelValue",a.target.value)}function t(a){e("blur",a)}return{...n,inputHandler:o,onBlur:t}}},$={class:"relative"},U=["for"],q=["type","id","value","placeholder","invalid"],z={key:0,class:"text-red-500"};function D(n,e,o,t,a,s){return i(),v("div",$,[p("label",{for:o.id,class:"base-input-label"},h(o.label),9,U),p("input",{type:o.type,id:o.id,class:A(["base-input",{invalid:o.invalid}]),value:o.modelValue,placeholder:o.placeholder,invalid:o.invalid,onInput:e[0]||(e[0]=l=>t.inputHandler(l)),onBlur:e[1]||(e[1]=l=>t.onBlur(l))},null,42,q),o.invalid?(i(),v("small",z,"Field is invalid")):S("",!0)])}const M=m(O,[["render",D],["__scopeId","data-v-5cbf8443"]]);function P(n){const e=f(n.value),o=f(!0),t=w({});let a=f(!1);const s=l=>{o.value=!0,Object.keys(n.validators??{}).map(d=>{const u=n.validators[d](l);t[d]=!u,u||(o.value=!1)})};return s(n.value),F(e,s),{value:e,valid:o,touched:a}}function R(n={}){const e=w({});for(const[t,a]of Object.entries(n))e[t]=P(a);const o=t=>t!=="valid";return e.valid=x(()=>Object.keys(e).filter(o).reduce((t,a)=>(t=e[a].valid,t),!0)),e}const y=n=>!!n,G=n=>e=>e.length>=n,J={components:{AppButton:k,AppForm:N,AppInput:M},setup(){const n=L(),e=I(),o=R({login:{value:"",validators:{required:y}},password:{value:"",validators:{required:y,minLength:G(8)}}});return{form:o,submit:async()=>{await n.dispatch("auth/login",o),e.push("/")}}}};function K(n,e,o,t,a,s){const l=c("AppInput"),d=c("AppButton"),u=c("AppForm");return i(),V(u,{title:"Login",onSubmit:t.submit},{fields:g(()=>[_(l,{modelValue:t.form.login.value,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.login.value=r),placeholder:"Enter name",label:"Name",id:"form-login",invalid:!t.form.login.valid&&t.form.login.touched,onBlur:e[1]||(e[1]=r=>t.form.login.touched=!0)},null,8,["modelValue","invalid"]),_(l,{modelValue:t.form.password.value,"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.password.value=r),placeholder:"Enter password",label:"Password",id:"form-password",type:"password",invalid:!t.form.password.valid&&t.form.password.touched,onBlur:e[3]||(e[3]=r=>t.form.password.touched=!0)},null,8,["modelValue","invalid"])]),actions:g(()=>[_(d,{title:"Log in",disabled:!t.form.valid},null,8,["disabled"])]),_:1},8,["onSubmit"])}const Q=m(J,[["render",K]]),T={components:{LoginForm:Q}};function W(n,e,o,t,a,s){const l=c("LoginForm");return i(),V(l)}const Y=m(T,[["render",W]]);export{Y as default};
